<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CVP paper 2021: Benchmarks to compare projectors speed | KCT framework</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../rss.xml">
<link rel="canonical" href="https://kulvait.github.io/KCT_doc/posts/cvp-paper-2021-3-benchmarks-to-compare-projectors-speed.html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><meta name="author" content="VK">
<link rel="prev" href="cvp-paper-2021-2-adjoint-product-test.html" title="CVP paper 2021: Adjoint product test" type="text/html">
<link rel="next" href="cvp-paper-2021-4-comparing-projectors-accuracy.html" title="CVP paper 2021: Comparing projectors accuracy" type="text/html">
<meta property="og:site_name" content="KCT framework">
<meta property="og:title" content="CVP paper 2021: Benchmarks to compare projectors speed">
<meta property="og:url" content="https://kulvait.github.io/KCT_doc/posts/cvp-paper-2021-3-benchmarks-to-compare-projectors-speed.html">
<meta property="og:description" content="We have made the following statement in the publication that will be sent for peer review to the IEEE Transactions on Medical Imaging:

Transparency and reproducibility of the results

We believe in t">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2021-10-05T16:06:54+02:00">
<meta property="article:tag" content="cvp-paper-2020">
<meta property="article:tag" content="cvp-paper-2021">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark
bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="../">

            <span id="blog-title">KCT framework</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../categories/using_kct_blog.html" class="nav-link">Using KCT blog</a>
                </li>
<li class="nav-item">
<a href="../posts" class="nav-link">Blog posts</a>
                </li>
<li class="nav-item">
<a href="../archive.html" class="nav-link">Blog Archive</a>
                </li>
<li class="nav-item">
<a href="../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h2 class="p-name entry-title" itemprop="headline name">CVP paper 2021: Benchmarks to compare projectors speed</h2>

        <div class="metadata">
            <p class="dateline">
            <time class="published dt-published" datetime="2021-10-05T16:06:54+02:00" itemprop="datePublished" title="05.10.2021">05.10.2021</time></p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>We have made the following statement in the publication that will be sent for peer review to the <a href="https://ieeexplore.ieee.org/xpl/RecentIssue.jsp?punumber=42">IEEE Transactions on Medical Imaging</a>:</p>
<pre style="white-space: pre-wrap;">
Transparency and reproducibility of the results

We believe in the concept of open science. Therefore, not only the software developed by the first author is published under an open source license, we are also publishing all the procedures, scripts, input data and log files, including implementation details, that were used to produce the graphs and tables in the results section. This way, anyone can reproduce our steps on their hardware and compare the results, or use our logs and scripts to compare the results with the underlying data. The files and protocols are published on the website https://kulvait.github.io/KCT_doc/categories/cvp-paper-2020.html.

This is also important for the users of the software, because in the future we can disclose how the run times of the projectors change with new versions of the software or with new hardware.
</pre>

<h2>Comparion of the speed</h2>
<p>Here we describe precisely how we perform comparsion of the projector and backprojector speeds.</p>
<p>Link to the log files of the speed comparison can be found <a href="https://data.stimulate.ovgu.de/f/be84e799fd774deabeb5/?dl=1">here</a>.</p>
<p>From the tests we performed were prepared the following deterministic benchmarks. The tests can be run with the reproducible setup using precisely defined <a href="https://data.stimulate.ovgu.de/f/be84e799fd774deabeb5/?dl=1">input data</a>, camera matrices representing geometries and projection data. Aim of both benchmarks is to run an itterative reconstruction process and precisely measure the speeds of projectors and bacprojector during it. The data reconstructed is deterministically generated noise from uniform distribution [0,1]. These data are disclosed for each benchmark.</p>
<p>For given setup 40 itterations of an CT reconstruction technique shall be used, which performs exactly 40 projections and 40 backprojections. After the initialization, that might be after the data are loaded into the GPU memmory, before the first backprojection start, starts the time measurement. Between the backprojection and consecutive projection is reported the difference time as the time of backprojection. It is not possible to exclude time between backprojection and consecutive projection from the measurement. Exact placement of the measured point is on the implementation. Time can be stopped after the last projection is executed, before writing the data to the disk. Then the average time of projection and backprojection is computed.</p>
<p>In our tests we used CGLS, because it does not perform intensive operations but projections and backprojections. </p>
<p>The tests use the <code>createCameraMatricesForCircularScanTrajectory.py</code> script for creating geometry setup of circular scan. Details of the implementation and derivation can be found in this <a href="working-with-kct-cbct-2-projective-geometry-and-camera-matrices-to-describe-ct-geometry.html">blog post</a>.</p>
<h3>Benchmark YL</h3>
<p>Based on the setup from the paper http://doi.org/10.1109/TMI.2010.2050898</p>
<p>Data to reconstruct were prepared using the command <code>dentk-empty</code> from <a href="https://github.com/kulvait/KCT_dentk">dentk toolbox</a>. It simulates 720 views of the $512 \times 512$ detector matrix.</p>
<pre class="code literal-block">dentk-empty --noise 512 512 720 noise512x512x720.den
</pre>
<p>Even through the current implementation of <code>dentk-empty</code> shall produce deterministic noise, we include the file <code>noise512x512x720.den</code> into the <a href="https://data.stimulate.ovgu.de/f/be84e799fd774deabeb5/?dl=1">data disclosed</a>.</p>
<p>The camera matrices, which define given geometry was created using the command <code>createCameraMatricesForCircularScanTrajectory.py</code> from <a href="https://github.com/kulvait/KCT_scripts">scripts repository</a>.</p>
<pre class="code literal-block">createCameraMatricesForCircularScanTrajectory.py --write-params-file --projection-sizex 512 --projection-sizey 512 --pixel-sizex 1.0 --pixel-sizey 1.0 --source-to-detector 949 --source-to-isocenter 541 --number-of-angles 720 YLBenchmarkInputData/CMLong720_512x512.den
</pre>
<p>These input files define the input setup of the test. </p>
<h3>Benchmark TP</h3>
<p>Based on the setup from T.  Pfeiffer,  R.  Frysch,  and  G.  Rose,  “Two  extensions  of  the  separablefootprint  forward  projector,”  16th International Meeting on FullyThree-Dimensional Image Reconstruction in Radiology and NuclearMedicine, 2021.</p>
<p>Data to reconstruct were prepared using the command <code>dentk-empty</code> from <a href="https://github.com/kulvait/KCT_dentk">dentk toolbox</a>. It simulates 100 views of the $1280 \times 960$ detector matrix.</p>
<pre class="code literal-block">dentk-empty --noise 1280 960 100 noise1280x960x100.den
</pre>
<p>Even through the current implementation of <code>dentk-empty</code> shall produce deterministic noise, we include the file <code>noise1280x960x100.den</code> into the <a href="https://data.stimulate.ovgu.de/f/be84e799fd774deabeb5/?dl=1">data disclosed</a>.</p>
<p>The camera matrices, which define given geometry was created using the command <code>createCameraMatricesForCircularScanTrajectory.py</code> from <a href="https://github.com/kulvait/KCT_scripts">scripts repository</a>.</p>
<pre class="code literal-block">createCameraMatricesForCircularScanTrajectory.py --write-params-file --projection-sizex 1280 --projection-sizey 960 --pixel-sizex 0.25 --pixel-sizey 0.25 --omega-zero 0 --omega-angular-range 198 --source-to-detector 1000 --source-to-isocenter 750 --number-of-angles 100 shortScanTP100_1280x960.den
</pre>
<p>These input files define the input setup of the test. </p>
<h2>Results of the benchmarks for CVP paper</h2>
<p>Log files and input files are disclosed <a href="https://data.stimulate.ovgu.de/f/be84e799fd774deabeb5/?dl=1">here</a>.
The <a href="https://data.stimulate.ovgu.de/f/be84e799fd774deabeb5/?dl=1">results logs</a> can be parsed and the average projection and backprojection times obtained by running the script</p>
<pre class="code literal-block">averageTimes log_file
</pre>
<p>from the https://github.com/kulvait/KCT_scripts/tree/master/reconstruction</p>
<p>The structure of the data is as follows:</p>
<p>In the speedComparison folders there are the log files from which the resulting speeds of corresponding projectors/backprojectors were generated, commit of KCT and the full command is also disclosed in each log file. Particular input projection matrices and projection data can be found at TPBenchmarkInputData and YLBenchmarkInputData.</p>
<p>YL=Table I from the paper, TP= Table II from the paper</p>
<p>Logs are from several CVP projector/backprojector settings. Only few are refered in the tables of the paper. There is the mapping of projectors/backprojectors to the log files:</p>
<p>CVP=nobar_norel_elv.log</p>
<p>CVP relaxed=bar_rel_elv.log</p>
<p>TT=tt.log</p>
<p>Siddon8=siddon8.log</p>
    </div>
	<div class="text-right">
            <p class="byline author vcard p-author h-card"><span class="badge badge-primary" itemprop="author">
                    VK
            </span></p>
	</div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../categories/cvp-paper-2020.html" rel="tag">cvp-paper-2020</a></li>
            <li><a class="tag p-category" href="../categories/cvp-paper-2021.html" rel="tag">cvp-paper-2021</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="cvp-paper-2021-2-adjoint-product-test.html" rel="prev" title="CVP paper 2021: Adjoint product test">Previous post</a>
            </li>
            <li class="next">
                <a href="cvp-paper-2021-4-comparing-projectors-accuracy.html" rel="next" title="CVP paper 2021: Comparing projectors accuracy">Next post</a>
            </li>
        </ul></nav></aside><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'center', // Change this to 'left' if you want left-aligned equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script></article><!--End of body content--><footer id="footer">
            Contents © 2023         <a href="mailto:kulvait%20at%20gmail%20dot%20com">VK</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a> <br><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png">   </a><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">KCT framework wiki and blog</span> by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Vojtěch Kulvait</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>. <br>
KCT framework itself is licensed under the terms of GNU GPL3 license. <br>
Any data provided on this site or within the KCT framework may be subject to different licensing arrangements.

            
            
        </footer>
</div>
</div>


        <script src="../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>

